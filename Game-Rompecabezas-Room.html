<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üß© Unit 2 My Room </title>
<style>
  :root{
    --accent:#0077b6;
    --bg: url('PaisajeC.jpg') no-repeat center center fixed;
  }
  body{
    margin:0;
    font-family:"Comic Sans MS", cursive;
    background:var(--bg);
    background-size:cover;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:12px;
    min-height:100vh;
    padding:18px;
    box-sizing:border-box;
    overflow-x:hidden;
  }
  .cover, .final {
    width:100%;
    max-width:900px;
    padding:24px;
    border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,0.12);
    text-align:center;
    background:linear-gradient(135deg,#caf0f8,#fde4cf);
  }
  h1{ color:var(--accent); margin:0; }

  .game {
    width:100%;
    max-width:900px;
    display:flex;
    gap:20px;
    align-items:flex-start;
    justify-content:center;
  }
  .left {
    flex:1 1 620px;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  .right {
    width:200px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
    margin-top:20px;
  }

  .board {
    width: calc(3*120px + 2*6px);
    height: calc(3*120px + 2*6px);
    display:grid;
    grid-template-columns:repeat(3,120px);
    grid-template-rows:repeat(3,120px);
    gap:6px;
    padding:6px;
    background:#fff;
    border-radius:10px;
    border:4px solid var(--accent);
    box-shadow:0 8px 20px rgba(0,0,0,0.12);
    touch-action:none;
  }

  .cell {
    width:120px;
    height:120px;
    border-radius:8px;
    background-repeat:no-repeat;
    background-size:360px 360px;
    cursor:grab;
    user-select:none;
    touch-action:none;
    transition: transform 0.2s ease, box-shadow 0.3s ease;
  }
  .cell:active{ cursor:grabbing; transform:scale(.98); }
  .cell.animate {
    transform: scale(1.1);
    box-shadow:0 0 15px rgba(255,215,0,0.6);
  }

  .message{ 
    color:#28a745; 
    font-weight:700; 
    display:none; 
    margin-top:10px; 
    font-size:24px;
    animation: bounceIn 0.5s ease;
  }
.cover-teddy {
  display: block;
  margin: 20px auto 0 auto; /* espacio arriba y centrado */
  width: 250px;
}

.final-teddy {
  width: 120px;
  position: absolute;
  bottom: 20px;
  right: 20px;
}
  .play-button {
  margin-left: 8px;
  background: rgba(255,255,255,0.9);
  border: none;
  border-radius: 50%;
  font-size: 1em;
  cursor: pointer;
  padding: 6px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}


  @keyframes bounceIn {
    0% {transform: scale(0.5); opacity:0;}
    60% {transform: scale(1.2); opacity:1;}
    100% {transform: scale(1);}
  }

  .btn{ background:var(--accent); color:#fff; border:none; padding:10px 18px; border-radius:10px; cursor:pointer; }
  .gallery img{ width:120px; height:90px; object-fit:cover; border-radius:8px; border:3px solid var(--accent); box-shadow:0 8px 20px rgba(0,0,0,0.12); }

  /* üëá T√≠tulo principal de las emociones (ahora m√°s grande y animado) */
  .emotionTitle{
    text-align:center; 
    font-size:64px; /* tama√±o grande */
    font-weight:900; 
    margin:10px 0; 
    animation: colorCycle 4s linear infinite, completedPulse 3s infinite;
  }

  @keyframes colorCycle {
    0% {color:#ff595e;}
    25% {color:#ffca3a;}
    50% {color:#8ac926;}
    75% {color:#1982c4;}
    100% {color:#ff595e;}
  }

  /* üëá Texto de ‚ÄúCompleted‚Äù animado */
  .right strong{
    font-size:64px; /* m√°s grande */
    color:var(--accent);
    display:block;
    animation: completedPulse 2s infinite;
  }

  @keyframes completedPulse {
    0% { transform:scale(1); color:#0077b6; }
    25% { transform:scale(1.2); color:#ff595e; }
    50% { transform:scale(1); color:#ffca3a; }
    75% { transform:scale(1.2); color:#8ac926; }
    100% { transform:scale(1); color:#0077b6; }
  }

  @media(max-width:880px){
    .game{ flex-direction:column; align-items:center; gap:10px; }
    .right{ 
      width:100%; 
      flex-direction:row; 
      justify-content:center; 
      flex-wrap:wrap; 
      margin-top:10px;
    }
    .gallery img{ width:100px; height:70px; }
    .board{ transform:scale(.9); transform-origin:center; margin-top:5px; }
    .emotionTitle{ font-size:44px; } /* t√≠tulo m√°s peque√±o pero a√∫n grande en m√≥vil */
    .right strong{ font-size:30px; }
  }
</style>
</head>
<body>

<!-- Cover -->
<div class="cover" id="cover">
  <h1>üß© Unit 2 My Room </h1>
  <p>Drag the pieces and complete. </p>
  <button class="btn" onclick="startGame()">Start Game</button>
  <img src="osito.png" alt="teddy bear" class="cover-teddy">
</div>

<!-- Game -->
<div id="game" style="display:none; width:100%; max-width:900px;">
  <div class="emotionTitle" id="emotionName">  üòä</div>

  <div class="game">
    <div class="left">
      <div id="board" class="board" aria-label="Puzzle board"></div>
      <div id="message" class="message">üéâ Excellent job!</div>
    </div>

    <div class="right">
      <div><strong id="completedTitle">Completed</strong></div>
      <div id="gallery" class="gallery"></div>
    </div>
  </div>
</div>

<!-- Final -->
<div id="final" class="final" style="display:none;">
  <h1>üéâ Amazing!</h1>
  <p id="finalScore" style="font-weight:700; color:var(--accent); font-size:32px;">You scored 10/10!</p>
  <div id="finalGallery" style="display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:12px;"></div>
  <div style="margin-top:12px;">
    <button class="btn" onclick="restart()">Play Again</button>
    <img src="osito.png" alt="teddy bear" class="cover-teddy">
  </div>
</div>

<script>
const emotions = [
  { name: "bedroom", img: "bedroom3.jpg", audio: "bedroom.mp3" },
  { name: "bed", img: "bed3.jpg", audio: "bed.mp3" },
  { name: "chair", img: "chair3.jpg", audio: "chair.mp3" },
  { name: "lamp", img: "lamp3.jpg", audio: "lamp.mp3" },
  { name: "mat", img: "mat3.jpg", audio: "mat.mp3" },
  
  { name: "pillow", img: "pillow.jpg", audio: "pillow.mp3" },
  { name: "table", img: "table2.jpg", audio: "table.mp3" },
  { name: "share", img: "share3.jpg", audio: "share.mp3" },
  { name: "teddy bear", img: "teddy2.jpg", audio: "teddy-bear.mp3" },
  { name: "toys", img: "toys3.jpg", audio: "toys.mp3" }
];

const SIZE = 3;
const TILE = 120;
let current = 0;
let draggedCell = null;
let picked = null;

const board = document.getElementById('board');
const completedTitle = document.getElementById('completedTitle');

function startGame(){
  document.getElementById('cover').style.display = 'none';
  document.getElementById('final').style.display = 'none';
  document.getElementById('game').style.display = 'block';
  document.getElementById('gallery').innerHTML = '';
  current = 0;
  loadPuzzle();
}

function loadPuzzle(){
  const emo = emotions[current];
  const emotionTitle = document.getElementById('emotionName');
emotionTitle.innerHTML = ''; // limpia el contenido anterior

// Nombre de la emoci√≥n
const nameSpan = document.createElement('span');
nameSpan.textContent = emo.name + " üòä";

// Bot√≥n de audio
const btn = document.createElement('button');
btn.className = 'play-button';
btn.textContent = 'üîä';

// Conecta el bot√≥n al audio si existe
if (emo.audio) {
  btn.addEventListener('click', () => playAudio(emo.audio));
}

// A√±ade nombre y bot√≥n al contenedor
emotionTitle.appendChild(nameSpan);
emotionTitle.appendChild(btn);

  document.getElementById('message').style.display = 'none';
  board.innerHTML = '';

  const indices = [...Array(SIZE*SIZE).keys()];
  const positions = indices.slice();
  shuffle(positions);

  positions.forEach((correctIndex, gridIndex) => {
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.dataset.correct = String(correctIndex);
    cell.dataset.current = String(gridIndex);
    const sx = (correctIndex % SIZE) * -TILE;
    const sy = Math.floor(correctIndex / SIZE) * -TILE;
    cell.style.backgroundImage = `url(${emo.img})`;
    cell.style.backgroundPosition = `${sx}px ${sy}px`;

    // Arrastre m√≥vil
    cell.addEventListener('touchstart', e => { e.preventDefault(); cell.style.opacity = '0.7'; });
    cell.addEventListener('touchend', e => {
      e.preventDefault();
      const touch = e.changedTouches[0];
      const target = document.elementFromPoint(touch.clientX, touch.clientY);
      if(target && target.classList.contains('cell') && target !== cell){
        swapCells(cell, target);
        animateCell(target);
        checkSolved();
      }
      cell.style.opacity = '1';
    });

    // Arrastre desktop
    cell.draggable = true;
    cell.addEventListener('dragstart', (e) => { draggedCell = e.currentTarget; });
    cell.addEventListener('dragover', (e) => e.preventDefault());
    cell.addEventListener('drop', (e) => {
      e.preventDefault();
      const target = e.currentTarget;
      if(!draggedCell || draggedCell === target) return;
      swapCells(draggedCell, target);
      animateCell(target);
      checkSolved();
      draggedCell = null;
    });

    cell.addEventListener('click', onCellClick);
    board.appendChild(cell);
  });
}

function swapCells(a,b){
  const parent = a.parentNode;
  const children = Array.from(parent.children);
  const aIndex = children.indexOf(a);
  const bIndex = children.indexOf(b);
  if(aIndex < bIndex){
    parent.insertBefore(b,a);
    parent.insertBefore(a,parent.children[bIndex]);
  } else {
    parent.insertBefore(a,b);
    parent.insertBefore(b,parent.children[aIndex]);
  }
}

function onCellClick(e){
  const cell = e.currentTarget;
  if(!picked){
    picked = cell;
    cell.style.outline = '4px solid rgba(0,0,0,0.2)';
    return;
  }
  if(picked === cell){
    picked.style.outline = '';
    picked = null;
    return;
  }
  swapCells(picked, cell);
  picked.style.outline = '';
  animateCell(cell);
  checkSolved();
  picked = null;
}

function animateCell(cell){
  cell.classList.add('animate');
  setTimeout(() => cell.classList.remove('animate'), 250);
}

function checkSolved(){
  const cells = Array.from(board.children);
  const solved = cells.every((cell,index) => String(index) === cell.dataset.correct);
  if(solved){
    const msg = document.getElementById('message');
    msg.textContent = 'üéâ Excellent job!';
    msg.style.display = 'block';

    const img = document.createElement('img');
    img.src = emotions[current].img;
    img.alt = emotions[current].name;
    document.getElementById('gallery').appendChild(img);

    // üî∏ Animaci√≥n de ‚ÄúCompleted‚Äù cuando termina uno nuevo
    completedTitle.style.animation = 'none';
    completedTitle.offsetHeight; // reinicia animaci√≥n
    completedTitle.style.animation = 'completedPulse 3s infinite';

    setTimeout(() => {
      current++;
      if(current < emotions.length){
        loadPuzzle();
      } else {
        showFinal();
      }
    }, 1000);
  }
}

function showFinal(){
  document.getElementById('game').style.display = 'none';
  const final = document.getElementById('final');
  final.style.display = 'block';
  document.getElementById('finalScore').textContent = `You completed all puzzles! üéñÔ∏è Score: ${emotions.length}/${emotions.length}`;
  const g = document.getElementById('finalGallery');
  g.innerHTML = '';
  Array.from(document.getElementById('gallery').children).forEach(img => {
    const clone = img.cloneNode();
    clone.style.width = '120px';
    clone.style.height = '80px';
    g.appendChild(clone);
  });
}

function restart(){
  document.getElementById('final').style.display = 'none';
  document.getElementById('cover').style.display = 'block';
}

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
}
  function playAudio(src) {
  const audio = new Audio(src);
  audio.currentTime = 0;
  audio.play();
}
</script>
</body>
</html>













