<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game of Emotions</title>
<style>
  /* Ajustes para la zanahoria al lado del conejo */
  .egg {
    position: absolute;
    bottom: 10%; /* mismo nivel que el conejo */
    left: 55%;   /* a la derecha del conejo */
    transform: translateX(0) scale(1); /* no centrar en X */
    font-weight: bold;
    font-size: clamp(18px,4vw,28px); /* texto proporcional */
    color: #000;
    display: none;
    z-index: 5;
    width: clamp(50px,12vw,100px);   /* tamaño mediano zanahoria */
    height: clamp(70px,16vw,120px);
    padding-top: 5px;
    background-image: url("zanahoria.png");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center bottom;
    border: 3px solid gold;
    border-radius: 50% / 60%;
    text-align: center;
    line-height: 1.2;
    cursor: grab;
    transition: all 0.2s ease;
  }

  /* Ajuste responsive para móvil */
  @media (max-width: 600px) {
    .egg {
      left: 60%; /* un poco más a la derecha si es móvil */
      width: 70px;
      height: 100px;
      font-size: 22px;
    }
  }
</style>

<script>
function showEgg(emotion){
  egg.style.display="flex";
  egg.textContent = emotion;
  egg.setAttribute("data-word", emotion);

  // Posición inicial al lado del conejo
  function positionEgg() {
    const bunnyRect = bunny.getBoundingClientRect();
    egg.style.left = (bunnyRect.right + 10) + "px"; // 10px a la derecha del conejo
    egg.style.bottom = "10%"; // mismo nivel que conejo
  }
  positionEgg();

  // Ajustar si se rota o cambia tamaño de pantalla
  window.addEventListener("resize", positionEgg);
  window.addEventListener("orientationchange", positionEgg);

  // Guardar posición inicial
  const startLeft = egg.offsetLeft;
  const startTop  = egg.offsetTop;

  // Touch para móviles
  egg.ontouchstart = function(e){
    e.preventDefault();
    draggingWord = emotion;
    const startX = e.touches[0].clientX - egg.offsetLeft;
    const startY = e.touches[0].clientY - egg.offsetTop;

    const moveEgg = function(ev){
      const touch = ev.touches[0];
      egg.style.left = (touch.clientX - startX) + "px";
      egg.style.top  = (touch.clientY - startY) + "px";
    };

    document.ontouchmove = moveEgg;
    document.ontouchend = function(){
      document.ontouchmove = null;
      document.ontouchend = null;

      let droppedOnZone = false;

      zones.forEach(zone=>{
        const rect = zone.getBoundingClientRect();
        const eggRect = egg.getBoundingClientRect();
        const centerX = eggRect.left + eggRect.width/2;
        const centerY = eggRect.top + eggRect.height/2;

        if(centerX >= rect.left && centerX <= rect.right &&
           centerY >= rect.top && centerY <= rect.bottom){
          droppedOnZone = true;
          if(zone.dataset.match === draggingWord){
            score++;
            message.textContent = `✅ Correct! (${score}/${emotions.length})`;
            message.style.color = "#00a86b";
            zone.classList.add("correct");
          } else {
            message.textContent = `❌ Oops! Try again next time.`;
            message.style.color = "#ff595e";
          }
          egg.style.display = "none";
          current++;
          setTimeout(startRound, 1000);
        }
      });

      if(!droppedOnZone){
        egg.style.left = startLeft + "px";
        egg.style.top  = startTop + "px";
      }
    };
  };

  // Desktop drag & drop
  egg.setAttribute("draggable",true);
  egg.ondragstart = function(e){
    draggingWord = emotion;
    e.dataTransfer.setData("text", draggingWord);
  };
}
</script>
</body>
</html>

